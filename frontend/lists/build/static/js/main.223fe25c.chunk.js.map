{"version":3,"sources":["components/Ingredient.module.css","components/CookingStage.module.css","components/Form.module.css","components/Cookbook.module.css","components/StringField.module.css","components/NumberField.module.css","components/Button.module.css","components/Popup.module.css","hooks/useLocalStorage.js","contexts/AuthContext.js","contexts/ThemeContext.js","components/NavigationBar.js","components/TabStrip.js","components/Button.js","components/Login.js","components/User.js","functions/fetchLanis.js","functions/fetchLanisShare.js","contexts/DevContext.js","hooks/useLanisServer.js","components/BetterItem.js","components/BetterList.js","components/BetterBoard.js","components/ToggleIcon.js","components/BetterLists.js","components/SportsMenu.js","components/Squash.js","components/Gym.js","components/Ingredient.js","components/CookingStage.js","components/Group.js","components/Popup.js","components/StringField.js","components/NumberField.js","components/Form.js","components/Cookbook.js","components/Fifths.js","components/Games/WordPop/correct.mp3","components/Games/WordPop/incorrect.mp3","components/Games/WordPop/WordPop.js","components/tmp/Nouns.js","components/Games/VocabBuilder/VocabBuilder.js","components/Games/GameMenu.js","components/Games/Syllable/Syllable.js","components/LanisRouter.js","App.js","index.js"],"names":["module","exports","useLocalStorage","key","initialValue","useState","JSON","parse","localStorage","getItem","Function","getSavedValue","value","setValue","useEffect","setItem","stringify","AuthContext","React","createContext","AuthUpdateContext","useAuth","useContext","useAuthUpdate","AuthProvider","children","auth","setAuth","Provider","ThemeContext","ThemeUpdateContext","useTheme","useThemeUpdate","ThemeProvider","accent1","accent2","fontSize","theme","setTheme","NavigationBar","navMenu","setNavMenu","userInitials","userName","text","replace","substring","getInitials","user","name","style","display","flexDirection","justifyContent","alignItems","caption","path","menu","map","tab","className","activeClassName","to","onClick","prev","onMouseLeave","menuItem","flexGrow","textDecoration","borderRadius","height","width","backgroundColor","cursor","marginBottom","cx","cy","r","fill","TabStrip","tabs","selectedTab","clickTab","tabStyle","padding","flexBasis","textAlign","selectedTabStyle","color","Button","styles","body","registrationEndpoint","loginEndpoint","tokenUser","token","tokenPayload","split","decodedPayload","atob","Login","authUpdate","setSelectedTab","errorMessage","setErrorMessage","userNameRef","useRef","pinRef","pinConfirmationRef","handlePinKeypress","e","handleFormSubmit","register","pinConfirmationBody","confirmPin","current","requestBody","username","pin","err","form","confirm","test","length","validateForm","handleRegistration","handleLogin","a","fetch","method","headers","response","status","errMsg","json","processedResponse","labelStyle","alignSelf","marginTop","inputStyle","onSubmit","minHeight","maxWidth","margin","htmlFor","type","id","ref","onKeyPress","User","fetchLanis","endpoint","fetchLanisShare","DevContext","useDev","DevProvider","dev","window","location","href","includes","useLanisServer","filter","jwt","refreshRate","localRecords","setLocalRecords","serverRecords","setServerRecords","createdRecords","setCreatedRecords","updatedRecords","setUpdatedRecords","lastRefresh","setLastRefresh","devMode","selectRecords","Date","now","action","serverResponse","parsedResponse","refreshInterval","setInterval","clearInterval","prevRecords","serverRecord","matchingPrevious","find","prevRecord","modified","s","local","server","payload","createRecords","updateRecords","BetterItem","item","toggle","rename","move","useDrag","end","dragItem","monitor","didDrop","dropResult","getDropResult","drag","captionStyle","onContextMenu","preventDefault","readOnly","checked","BetterList","list","onCaptionRightClick","items","setItems","useDrop","accept","canDrop","listId","drop","toggleItem","newItems","prevItem","renameItem","newCaption","prompt","active","moveItem","targetListId","f","fieldsetStyle","shoppingMode","borderStyle","borderWidth","borderColor","minWidth","order","legendStyle","textBoxStyle","border","role","contentEditable","suppressContentEditableWarning","charCode","uuid","seqNo","addItem","target","innerText","sort","b","BetterBoard","match","boardId","params","lists","setLists","renameList","newLists","prevList","maxHeight","overflowY","flexWrap","ToggleIcon","tooltip","title","viewBox","x","y","rx","ry","textAnchor","dominantBaseline","BetterLists","boards","setBoards","sharePopup","setSharePopup","shareRecipients","setShareRecipients","users","setUsers","receivedUsers","fetchUsers","resourceId","console","log","undefined","fetchOwners","linkStyle","whiteSpace","linkInactiveStyle","linkActiveStyle","backdropStyle","position","left","top","popupStyle","popupHeaderStyle","shareHeadingStyle","recipientStyle","marginLeft","removeRecipientStyle","fontWeight","board","activeStyle","newBoards","prevBoard","renameBoard","prevTheme","alert","exact","component","stopPropagation","rec","then","res","onChange","curVal","selectedUser","u","SportsMenu","aspectRatio","option","Squash","players","setPlayers","results","setResults","prevPlayers","player","points","playerA","pointsA","pointsB","playerB","tiebreak","reduce","cur","games","against","scored","lost","selfStyle","otherStyle","rank","marginRight","playerName","prevPlayer","playerIn","game","scoreText","newPointsA","newPointsB","prevResults","parseInt","addResult","newPlayerName","addPlayer","Gym","Ingredient","props","amount","amountQuantity","unit","amountUnits","CookingStage","onDrop","collect","isOver","collected","fieldsetClassName","classNames","frame","empty","receiving","captionLegend","index","Group","droppedItem","updatedProps","handleDrop","dropRef","dragRef","handleChange","newValue","contents","Popup","background","onClose","StringField","label","input","defaultValue","NumberField","Form","sourceObject","data","Object","keys","displayObject","formResult","setFormResult","updateResult","prevResult","onUpdate","fields","handleCallback","jsonField","createIngredientComponent","ingredientData","Cookbook","lanes","setLanes","popupQueue","ingredients","currentPopup","lane","laneIndex","stages","stage","prevLanes","prevLane","prevStage","laneId","newStageCaption","Fifths","Audio","correctAudio","incorrectAudio","WordPop","bubbles","setBubbles","dictionary","setDictionary","setMissedWords","lives","setLives","newWordInterval","generateFakeNouns","nouns","fakeNouns","forEach","n","push","noun","fakes","i","fn","genFakes","nom","popBubble","uncaught","bubble","dictionaryEntry","d","wordId","english","p","missedCount","Math","max","class","WordPopUnpopped","WordPopPopped","WordPopUncaught","setTimeout","handleBubbleClick","parentElement","handleBubbleRisen","dictionaryIndex","round","random","targetWord","horizontalPosition","posStyle","right","toString","word","latvian","translation","WordPopBubble","WordPopBubbleRising","WordPopGotcha","addRandomWord","eng","getNouns","WordPopPaused","onAnimationEnd","repeat","Nouns","dec","proper","setStatus","setErr","lastWord","setLastWord","resText","focus","statusStyle","onBlur","endsWith","VocabBuilder","setNouns","reverse","setReverse","play","setPlay","batch","setBatch","setRound","options","setOptions","gameOver","setGameOver","startGame","reverseGame","newBatch","slice","newOptions","m","decoys","OPTION_COUNT","resp","nextRound","findIndex","v","correct","givenAnswer","submitAnswer","VocabBuilderCorrect","VocabBuilderIncorrect","VocabBuilderCurrent","GAMES","link","GameMenu","breakIntoSyllables","Syllable","setCurrent","newIndex","decoyWords","flatMap","t","join","LanisRouter","queryClient","QueryClient","App","client","DndProvider","backend","HTML5Backend","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.223fe25c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Ingredient_body__3sWeY\",\"caption\":\"Ingredient_caption__3raZg\",\"amountUnits\":\"Ingredient_amountUnits__8qoZs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"CookingStage_body__143jg\",\"frame\":\"CookingStage_frame__3m_cs\",\"empty\":\"CookingStage_empty__3mQuy\",\"receiving\":\"CookingStage_receiving__28JUA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"Form_border__3dCsR\",\"caption\":\"Form_caption__2qD-o\",\"jsonField\":\"Form_jsonField__3UMsr\",\"fields\":\"Form_fields__bVZBD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Cookbook_body__1r41O\",\"ingredients\":\"Cookbook_ingredients__2Xy_t\",\"CookbookStage\":\"Cookbook_CookbookStage__1x-wL\",\"CookbookHighlight\":\"Cookbook_CookbookHighlight__2K-Id\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"StringField_body__2zf-R\",\"label\":\"StringField_label__3b8Nj\",\"input\":\"StringField_input__2F8wV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"NumberField_body__2m0q5\",\"label\":\"NumberField_label__1Ijfr\",\"input\":\"NumberField_input__3CVvz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Button_body__2dkgX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"background\":\"Popup_background__3gH5c\"};","import { useState, useEffect } from 'react';\r\n\r\nfunction getSavedValue(key, initialValue) {\r\n    const savedValue = JSON.parse(localStorage.getItem(key));\r\n\r\n    if (savedValue) return savedValue;\r\n\r\n    if (initialValue instanceof Function) return initialValue();\r\n\r\n    return initialValue;\r\n}\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const [value, setValue] = useState(() => {\r\n        return getSavedValue(key, initialValue);\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(key, JSON.stringify(value));\r\n    }, [value]);\r\n\r\n    return [value, setValue];\r\n}","import React, { useContext } from 'react';\r\nimport useLocalStorage from '../hooks/useLocalStorage';\r\n\r\nconst LOCAL_STORAGE_KEY = \"LANIS_PERSONAL\";\r\nconst AuthContext = React.createContext();\r\nconst AuthUpdateContext = React.createContext();\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport function useAuthUpdate() {\r\n    return useContext(AuthUpdateContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [auth, setAuth] = useLocalStorage(LOCAL_STORAGE_KEY, null);\r\n\r\n    return (\r\n        <AuthContext.Provider value={auth}>\r\n            <AuthUpdateContext.Provider value={setAuth}>\r\n                {children}\r\n            </AuthUpdateContext.Provider>\r\n        </AuthContext.Provider>\r\n    )\r\n}","import React, { useContext, useState } from 'react';\r\n\r\nconst ThemeContext = React.createContext();\r\nconst ThemeUpdateContext = React.createContext();\r\n\r\nexport function useTheme() {\r\n    return useContext(ThemeContext);\r\n}\r\n\r\nexport function useThemeUpdate() {\r\n    return useContext(ThemeUpdateContext);\r\n}\r\n\r\nexport function ThemeProvider({ children }) {\r\n    const [theme, setTheme] = useState({\r\n        accent1: \"#8B008B\",\r\n        accent2: \"#eee\",\r\n        fontSize: 0.8\r\n    });\r\n\r\n    return (\r\n        <ThemeContext.Provider value={theme}>\r\n            <ThemeUpdateContext.Provider value={setTheme}>\r\n                {children}\r\n            </ThemeUpdateContext.Provider>\r\n        </ThemeContext.Provider>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useTheme, useThemeUpdate } from '../contexts/ThemeContext';\r\nimport './NavigationBar.css';\r\nimport classNames from 'classnames';\r\n\r\nexport default function NavigationBar() {\r\n    const auth = useAuth();\r\n    const theme = useTheme();\r\n    const setTheme = useThemeUpdate();\r\n    const [navMenu, setNavMenu] = useState(\"\");\r\n\r\n    const navTabs = [\r\n        {\r\n            caption: \"Lists\",\r\n            path: \"/lists\"\r\n        },{\r\n            caption: \"Sports\",\r\n            path: \"/sports\"\r\n        },{\r\n            caption: \"Cookbook\",\r\n            path: \"/cookbook\"\r\n        },{\r\n            caption: \"Games\",\r\n            menu: [\r\n                {\r\n                    caption: 'VocabBuilder',\r\n                    path: '/games/vocabbuilder'\r\n                },{\r\n                    caption: 'WordPop',\r\n                    path: '/games/wordpop'\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n\r\n    function capitalLetters(text) {\r\n        return text.replace(/[a-z]/g, \"\");\r\n    }\r\n\r\n    function getInitials(userName) {\r\n        return capitalLetters(userName).substring(0,2) || userName.substring(0,1);\r\n    }\r\n\r\n    const userInitials = auth && getInitials(auth.user.name);\r\n\r\n    const barStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\"\r\n    };\r\n    const linkStyle = {\r\n        textDecoration: \"none\"\r\n    };\r\n    const userStyle = {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        borderRadius: \"50%\",\r\n        height: \"30px\",\r\n        width: \"30px\",\r\n        backgroundColor: \"#ddd\",\r\n        cursor: \"pointer\",\r\n        marginBottom: \"5px\"\r\n    };\r\n    const userNameStyle = {\r\n        fontSize: \"0.9em\"\r\n    };\r\n\r\n    return (\r\n        <div style={barStyle}>\r\n            {\r\n                navTabs.map(tab => {\r\n                    return tab.path ? (\r\n                        <NavLink className=\"NavigationBarLink\" activeClassName=\"NavigationBarActiveLink\" to={tab.path} key={tab.path}>\r\n                            <span className=\"NavigationBarTab\">\r\n                                {tab.caption}\r\n                            </span>\r\n                        </NavLink>\r\n                    ) : (\r\n                        <span key={tab.caption} className=\"NavigationBarMenu\" onClick={() => {\r\n                            setNavMenu((prev) => prev === tab.caption ? '' : tab.caption);\r\n                            // console.log(\"outer span click\")\r\n                        }} onMouseLeave={() => {\r\n                            setNavMenu('');\r\n                        }}>\r\n                            {tab.caption}\r\n                            {\r\n                                tab.caption === navMenu ? (\r\n                                    <div>\r\n                                        {tab.menu.map(menuItem => (\r\n                                            <NavLink className=\"NavigationBarLink\" activeClassName=\"NavigationBarActiveLink\" to={menuItem.path} key={menuItem.path}>\r\n                                                <div key={menuItem.path}>\r\n                                                    {menuItem.caption}\r\n                                                </div>\r\n                                            </NavLink>\r\n                                        ))}\r\n                                    </div>\r\n                                ) : null\r\n                            }\r\n                        </span>\r\n                    );\r\n                })\r\n            }\r\n            <div style={{flexGrow: \"1\"}}></div>\r\n            <NavLink to=\"/user\" style={linkStyle}>\r\n                <div style={userStyle}>\r\n                    <div style={userNameStyle}>\r\n                        {auth ?\r\n                            userInitials :\r\n                            <svg width=\"20\" height=\"20\">\r\n                                <circle cx=\"10\" cy=\"7\" r=\"4\" fill=\"#bbb\" />\r\n                                <circle cx=\"10\" cy=\"20\" r=\"7\" fill=\"#bbb\" />\r\n                            </svg>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </NavLink>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function TabStrip({ tabs, selectedTab, clickTab }) {\r\n    const divStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        width: \"100%\"\r\n    };\r\n    const tabStyle = {\r\n        padding: \"5px\",\r\n        backgroundColor: \"#ccc\",\r\n        cursor: \"pointer\",\r\n        flexGrow: \"1\",\r\n        flexBasis: \"0\",\r\n        textAlign: \"center\"\r\n    };\r\n    const selectedTabStyle = {\r\n        padding: \"5px\",\r\n        backgroundColor: \"#8B008B\",\r\n        cursor: \"pointer\",\r\n        color: \"#ddd\",\r\n        flexGrow: \"1\",\r\n        flexBasis: \"0\",\r\n        textAlign: \"center\"\r\n    };\r\n\r\n    return (\r\n        <div style={divStyle}>\r\n            {tabs && tabs.map(tab => {\r\n                function handleTabClick() {\r\n                    clickTab && clickTab(tab);\r\n                }\r\n                return (\r\n                    <div key={tab} style={tab === selectedTab ? selectedTabStyle : tabStyle} onClick={handleTabClick}>\r\n                        {tab}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\nexport default function Button({ caption, onClick }) {\r\n    return (\r\n        <span className={styles.body} onClick={onClick}>\r\n            {caption}\r\n        </span>\r\n    )\r\n}","import { useState, useRef, useEffect } from 'react';\nimport TabStrip from './TabStrip';\nimport Button from './Button';\nimport { useAuthUpdate } from '../contexts/AuthContext';\n\n//const registrationEndpoint = \"http://www.lanis.co.uk/php/register\";\nconst registrationEndpoint = \"http://65.108.81.255/api/register.php\";\nconst loginEndpoint = \"http://65.108.81.255/api/login.php\";\n//const loginEndpoint = \"http://www.lanis.co.uk/php/login\";\n\nfunction tokenUser(token) {\n  let tokenPayload = token.split('.')[1];\n  let decodedPayload = atob(tokenPayload);\n  let user = JSON.parse(decodedPayload);\n  return user;\n}\n\nfunction Login() {\n  //#region hooks\n  // contexts\n  const authUpdate = useAuthUpdate();\n\n  // states\n  const [selectedTab, setSelectedTab] = useState(\"Login\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // refs\n  const userNameRef = useRef();\n  const pinRef = useRef();\n  const pinConfirmationRef = useRef();\n\n  // effects\n  useEffect(() => {\n    setErrorMessage(null);\n  },[selectedTab]);\n  //#endregion hooks\n\n  function handlePinKeypress(e) {\n    e.key === \"Enter\" && handleFormSubmit();\n  }\n\n  function validateForm(form) {\n    const {username, pin, confirmPin: confirm} = form;\n    const usernameRE = /^[a-zA-Z0-9]*$/;\n    const pinRE = /^[0-9]*$/;\n\n    if (!username) return \"Please provide a username\";\n    if (!usernameRE.test(username)) return \"Username invalid. Only letters and numbers allowed.\";\n\n    if (!pin) return \"Please enter a PIN\";\n    if (!pinRE.test(pin)) return \"Only numeric PINs please\";\n    if (pin.length < 4) return \"PIN too short. Use at least 4 digits.\";\n    if ((!!confirm || confirm === \"\") && (pin === \"1234\" || pin === \"0000\")) return \"Come on now...\";\n\n    if (confirm === \"\") return \"Please confirm the PIN\";\n    if (!!confirm && confirm !== pin) return \"PINs don't match\";\n\n\n    return null;\n  }\n  \n  function handleFormSubmit(e) {\n    setErrorMessage(null);\n    let register = selectedTab === \"Register\";\n    let pinConfirmationBody = register ? {confirmPin: pinConfirmationRef.current.value} : {};\n    let requestBody = {\n      username: userNameRef.current.value,\n      pin: pinRef.current.value,\n      ...pinConfirmationBody\n    };\n    let err = validateForm(requestBody);\n    if (err) {\n      setErrorMessage(err);\n      return;\n    }\n    register ? handleRegistration(requestBody) : handleLogin(requestBody);\n  }\n\n  async function handleRegistration(requestBody) {\n    try {\n      let response = await fetch(registrationEndpoint, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(requestBody)\n      });\n      if (response.status === 200) {\n        let loginBody = {\n          username: requestBody.username,\n          pin: requestBody.pin\n        };\n        handleLogin(loginBody);\n      } else {\n        let errMsg = \"Failed to register.\";\n        if (response.status === 409) errMsg += \" Username already taken.\";\n        if (response.status === 404) errMsg += \" User not found.\";\n        setErrorMessage(errMsg);\n      }\n    } catch {\n      setErrorMessage(\"Failed to contact server\");\n    }\n  }\n\n  async function handleLogin(requestBody) {\n    try {\n      let response = await fetch(loginEndpoint, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(requestBody)\n      });\n\n      if (response.status === 200) {\n        let processedResponse = await response.json();\n        authUpdate({\n          user: tokenUser(processedResponse),\n          token: processedResponse\n        });\n        setErrorMessage(null);\n      } else {\n        authUpdate(null);\n        let errMsg = \"Failed to log in\";\n        setErrorMessage(errMsg);\n      }\n      \n    } catch {\n      authUpdate(null);\n      setErrorMessage(\"Failed to contact server\");\n    }\n  }\n\n  //#region styles\n  const divStyle = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"90vh\",\n    maxWidth: \"200px\",\n    margin: \"0 auto\"\n  };\n  const labelStyle = {\n    alignSelf: \"start\",\n    color: \"#444\",\n    marginTop: \"10px\"\n  };\n  const inputStyle = {\n    width: \"100%\"\n  };\n  const errorStyle = {\n    color: \"red\",\n    marginTop: \"10px\",\n    textAlign: \"center\"\n  };\n  //#endregion\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <div style={divStyle}>\n        <TabStrip tabs={[\"Login\",\"Register\"]} selectedTab={selectedTab} clickTab={setSelectedTab}/>\n        <label htmlFor=\"username\" style={labelStyle}>Username</label>\n        <input type=\"text\" id=\"username\" style={inputStyle} ref={userNameRef} onKeyPress={handlePinKeypress}></input>\n        <label htmlFor=\"pin\" style={labelStyle}>PIN</label>\n        <input type=\"password\" id=\"pin\" style={inputStyle} ref={pinRef} onKeyPress={handlePinKeypress}></input>\n        {\n          selectedTab === \"Register\" ?\n          <>\n            <label htmlFor=\"confirmPin\" style={labelStyle}>Confirm PIN</label>\n            <input type=\"password\" id=\"pin\" style={inputStyle} ref={pinConfirmationRef} onKeyPress={handlePinKeypress}></input>\n          </>\n          : null\n        }\n        <div style={errorStyle}>\n          {errorMessage && errorMessage}\n        </div>\n        <Button caption={selectedTab === \"Register\" ? \"Register\" : \"Log In\"} onClick={handleFormSubmit}/>\n      </div>\n    </form>\n  );\n}\n\nexport default Login;","import React from 'react';\r\nimport Button from './Button';\r\nimport { useAuthUpdate } from '../contexts/AuthContext';\r\n\r\nexport default function User() {\r\n    const authUpdate = useAuthUpdate();\r\n\r\n    function handleLogout() {\r\n        authUpdate(null);\r\n    }\r\n\r\n    const menuStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\"\r\n    };\r\n\r\n    return (\r\n        <div style={menuStyle}>\r\n            <Button caption=\"Log Out\" onClick={handleLogout}/>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n\r\n// const ormEndpoint = \"http://www.lanis.co.uk/php/lapi\";\r\nconst ormEndpoint = \"api/lapi\";\r\n\r\nexport default async function fetchLanis(body, dev=false) {\r\n    //const endpoint = dev ? \"http://www.lanis.co.uk/\" + ormEndpoint : ormEndpoint;\r\n    const endpoint = \"http://65.108.81.255/api/lapi.php\";\r\n    return await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\"Content-Type\": \"application/json\"},\r\n        body: JSON.stringify(body)\r\n    });\r\n}","import React from 'react';\r\n\r\nconst shareEndpoint = \"php/share\";\r\n\r\nexport default async function fetchLanisShare(body, dev=false) {\r\n    //const endpoint = dev ? \"http://www.lanis.co.uk/\" + shareEndpoint : shareEndpoint;\r\n    const endpoint = \"http://65.108.81.255/api/share.php\";\r\n    return await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\"Content-Type\": \"application/json\"},\r\n        body: JSON.stringify(body)\r\n    });\r\n}","import React, { useContext } from 'react';\r\n\r\nconst DevContext = React.createContext();\r\n\r\nexport function useDev() {\r\n    return useContext(DevContext);\r\n}\r\n\r\nexport function DevProvider({ children }) {\r\n    const dev = window.location.href.includes('localhost');\r\n\r\n    return (\r\n        <DevContext.Provider value={dev}>\r\n                {children}\r\n        </DevContext.Provider>\r\n    )\r\n}","import { useState, useEffect } from 'react';\r\nimport fetchLanis from '../functions/fetchLanis';\r\nimport { useDev } from '../contexts/DevContext';\r\n\r\nexport default function useLanisServer({type, filter, jwt, refreshRate}) {\r\n    const [localRecords, setLocalRecords] = useState([]);\r\n    const [serverRecords, setServerRecords] = useState([]);\r\n    const [createdRecords, setCreatedRecords] = useState([]);\r\n    const [updatedRecords, setUpdatedRecords] = useState([]);\r\n    const [deletedRecords, setDeletedRecords] = useState([]);\r\n    const [lastRefresh, setLastRefresh] = useState(0);\r\n\r\n    const devMode = useDev();\r\n\r\n    useEffect(() => {\r\n        // console.log(\"Init side effect\");\r\n        async function selectRecords() {\r\n            // console.log(`Server refresh: ${type} - ${filter}`);\r\n            setLastRefresh(Date.now());\r\n            const serverResponse = await fetchLanis({\r\n                jwt: jwt,\r\n                action: \"select\",\r\n                type: type,\r\n                filter: filter\r\n            }, devMode);\r\n            // console.log(`selectRecords: status = ${serverResponse.status}`);\r\n            if (serverResponse.status === 200) {\r\n                const parsedResponse = await serverResponse.json();\r\n                // console.log(`selectRecords: selected ${parsedResponse.length} records`)\r\n                setServerRecords([...parsedResponse]);\r\n            }\r\n        }\r\n\r\n        selectRecords();\r\n\r\n        const refreshInterval = setInterval(selectRecords, refreshRate);\r\n        return () => clearInterval(refreshInterval);\r\n        \r\n        // eslint-disable-next-line\r\n    }, [filter]);\r\n\r\n    useEffect(() => {\r\n        // console.log(`serverRecords side effect: length = ${serverRecords.length}`);\r\n        setLocalRecords(prevRecords => {\r\n            let t = [...serverRecords.map(serverRecord => {\r\n                let matchingPrevious = prevRecords.find(prevRecord => prevRecord.id === serverRecord.id);\r\n                return matchingPrevious && matchingPrevious.modified > serverRecord.modified ? matchingPrevious : serverRecord;\r\n            }), ...prevRecords.filter(prevRecord => prevRecord.modified > lastRefresh && !serverRecords.find(s => s.id === prevRecord.id))];\r\n            return t;\r\n        });\r\n\r\n        // eslint-disable-next-line\r\n    }, [serverRecords]);\r\n\r\n    useEffect(() => {\r\n        // console.log(localRecords);\r\n        // console.log(`localRecords side effect: length = ${localRecords.length}`);\r\n        setCreatedRecords(\r\n            localRecords.filter(\r\n                local => !!!serverRecords?.find(\r\n                    server => server.id === local.id\r\n                )\r\n            )\r\n        );\r\n        setUpdatedRecords(\r\n            [...localRecords.filter(\r\n                local => !!serverRecords.find(\r\n                    server => {\r\n                        return server.id === local.id && local.modified > server.modified;\r\n                    }\r\n                )\r\n            )]\r\n        );\r\n        // setDeletedRecords(\r\n        //     serverRecords.filter(\r\n        //         server => !localRecords.find(\r\n        //             local => local.id === server.id\r\n        //         )\r\n        //     )\r\n        // );\r\n\r\n        // eslint-disable-next-line\r\n    }, [localRecords]);\r\n\r\n    useEffect(() => {\r\n        if (!!!createdRecords.length) return;\r\n        // console.log(`createdRecords side effect: length = ${createdRecords.length}`);\r\n\r\n        async function createRecords() {\r\n            await fetchLanis({\r\n                jwt: jwt,\r\n                action: \"insert\",\r\n                type: type,\r\n                payload: [...createdRecords]\r\n            }, devMode);\r\n        }\r\n\r\n        createRecords();\r\n        setCreatedRecords([]);\r\n\r\n        // eslint-disable-next-line\r\n    }, [createdRecords]);\r\n\r\n    useEffect(() => {\r\n        if (!!!updatedRecords.length) return;\r\n        // console.log(`updatedRecords side effect: length = ${updatedRecords.length}`);\r\n\r\n        async function updateRecords() {\r\n            let r = await fetchLanis({\r\n                jwt: jwt,\r\n                action: \"update\",\r\n                type: type,\r\n                payload: [...updatedRecords]\r\n            }, devMode);\r\n            // let p = await r.text();\r\n            // console.log(p);\r\n        }\r\n\r\n        updateRecords();\r\n        setUpdatedRecords([]);\r\n\r\n        // eslint-disable-next-line\r\n    }, [updatedRecords]);\r\n\r\n    // useEffect(() => {\r\n    //     if (!!!deletedRecords.length) return;\r\n    //     // console.log(`deletedRecords side effect: length = ${deletedRecords.length}`);\r\n\r\n    //     async function deleteRecords() {\r\n    //         await fetchLanis({\r\n    //             jwt: jwt,\r\n    //             action: \"delete\",\r\n    //             type: type,\r\n    //             payload: [...deletedRecords]\r\n    //         }, devMode);\r\n    //     }\r\n\r\n    //     deleteRecords();\r\n    //     setDeletedRecords([]);\r\n\r\n    //     // eslint-disable-next-line\r\n    // }, [deletedRecords]);\r\n\r\n    return [localRecords, setLocalRecords];\r\n}","import React from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport { useDrag } from 'react-dnd';\r\n\r\nexport default function BetterItem({ item, toggle, rename, move }) {\r\n    const theme = useTheme();\r\n    const [collected, drag, dragPreview] = useDrag(() => ({\r\n        type: 'item',\r\n        end: (dragItem, monitor) => {\r\n            if (!monitor.didDrop()) return;\r\n            const dropResult = monitor.getDropResult();\r\n            move(item, dropResult.id);\r\n        },\r\n        item: {...item}\r\n    }));\r\n\r\n    function handleClick(e) {\r\n        toggle(item);\r\n    }\r\n\r\n    function handleRightClick(e) {\r\n        e.preventDefault();\r\n        rename(item);\r\n    }\r\n\r\n    const itemStyle={\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        margin: \"0 2px\",\r\n        cursor: \"pointer\"\r\n    };\r\n    const captionStyle = {\r\n        textAlign: \"left\",\r\n        fontSize: theme.fontSize - 0.2 + \"em\"\r\n    };\r\n    return (\r\n        <div ref={drag} style={itemStyle} onClick={handleClick} onContextMenu={handleRightClick}>\r\n            <input type=\"checkbox\" readOnly checked={item.checked}/>\r\n            <div style={captionStyle}>\r\n                {item.caption}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport uuid from 'react-uuid';\r\nimport BetterItem from './BetterItem';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport useLanisServer from '../hooks/useLanisServer';\r\nimport fetchLanis from '../functions/fetchLanis';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useDev } from '../contexts/DevContext';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\n\r\nexport default function BetterList({ list, onCaptionRightClick }) {\r\n    const auth = useAuth();\r\n    const devMode = useDev();\r\n    const [items, setItems] = useLanisServer({\r\n        type: \"item\",\r\n        jwt: auth.token,\r\n        filter: list.id,\r\n        refreshRate: 1000\r\n    });\r\n    const theme = useTheme();\r\n    const [, drop] = useDrop(() => ({\r\n        accept: 'item',\r\n        canDrop: (item, monitor) => item.listId !== list.id,\r\n        drop: (item, monitor) => {\r\n            return list;\r\n        }\r\n    }));\r\n\r\n    function toggleItem(item) {\r\n        let newItems = items.map(prevItem => prevItem.id === item.id ? {...prevItem, checked: 1 - prevItem.checked, modified: Date.now()} : {...prevItem});\r\n        setItems(newItems);\r\n    }\r\n\r\n    function renameItem(item) {\r\n        let newCaption = window.prompt(\"Rename item\", item.caption);\r\n        if (newCaption === '') {\r\n            // old way of deleting\r\n            // let newItems = items.filter(prevItem => prevItem.id !== item.id);\r\n            let newItems = items.map(prevItem => prevItem.id === item.id ? {...prevItem, modified: Date.now(), active: 1-prevItem.active} : prevItem);\r\n            setItems(newItems);\r\n            return;\r\n        }\r\n        if (!newCaption) {\r\n            return;\r\n        }\r\n        let newItems = items.map(prevItem => prevItem.id === item.id ? {...prevItem, caption: newCaption, modified: Date.now()} : {...prevItem});\r\n        setItems(newItems);\r\n    }\r\n\r\n    function addItem(caption) {\r\n        let newItems = [...items, {\r\n            id: uuid(),\r\n            listId: list.id,\r\n            caption: caption,\r\n            checked: 0,\r\n            modified: Date.now(),\r\n            seqNo: 0,\r\n            active: 1\r\n        }];\r\n        setItems(newItems);\r\n    }\r\n\r\n    async function moveItem(item, targetListId) {\r\n        const res = await fetchLanis({\r\n            jwt: auth.token,\r\n            action: 'update',\r\n            type: 'item',\r\n            payload: [{...item, modified: Date.now(), listId: targetListId}]\r\n        }, devMode);\r\n        setItems(prev => prev.filter(f => f.id !== item.id));\r\n    }\r\n\r\n    function handleNewItemKeyPress(e) {\r\n        if (e.charCode === 13) {\r\n            e.preventDefault();\r\n            addItem(e.target.innerText);\r\n            e.target.innerText = \"\";\r\n        }\r\n    }\r\n\r\n    function handleCaptionRightClick(e) {\r\n        e.preventDefault();\r\n        onCaptionRightClick(list);\r\n    }\r\n\r\n    //#region styles\r\n    const fieldsetStyle = {\r\n        display: (theme?.shoppingMode && items?.filter(item => !item.checked).length === 0) ? \"none\" : \"flex\",\r\n        flexDirection: \"column\",\r\n        marginTop: \"5px\",\r\n        textAlign: \"center\",\r\n        borderStyle: \"solid\",\r\n        borderWidth: \"2px\",\r\n        borderColor: theme.accent1,\r\n        color: theme.accent1,\r\n        borderRadius: \"5px\",\r\n        minWidth: \"100px\",\r\n        // maxWidth: \"100%\",\r\n        // flexGrow: 1,\r\n        padding: \"0 2px 2px 2px\",\r\n        order: items?.length\r\n    };\r\n    const legendStyle = {\r\n        margin: \"0 auto\",\r\n        cursor: \"pointer\",\r\n        padding: \"0 5px\",\r\n        fontSize: theme.fontSize + \"em\"\r\n    };\r\n    const textBoxStyle = {\r\n        border: \"1px solid #ccc\",\r\n        padding: \"1px 6px\",\r\n        cursor: true ? \"auto\" : \"pointer\",\r\n        fontSize: theme.fontSize + \"em\",\r\n        flexGrow: \"1\",\r\n        margin: \"3px 5px\"\r\n    };\r\n    //#endregion\r\n\r\n    return (\r\n        list ? <fieldset style={fieldsetStyle} ref={drop}>\r\n            <legend style={legendStyle} onContextMenu={handleCaptionRightClick}>\r\n                {list.caption}\r\n            </legend>\r\n            <div role=\"textbox\" contentEditable suppressContentEditableWarning style={textBoxStyle} onKeyPress={handleNewItemKeyPress}></div>\r\n            {\r\n                items && items.filter(item => !theme.shoppingMode || !item.checked).filter(item => item.active === 1).sort((a,b) => a.caption < b.caption ? -1 : 0).map(item => {\r\n                    return (\r\n                        <BetterItem key={item.id} item={item} toggle={toggleItem} rename={renameItem} move={moveItem}/>\r\n                        )\r\n                    })\r\n            }\r\n        </fieldset> : null\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport uuid from 'react-uuid';\r\nimport useLanisServer from '../hooks/useLanisServer';\r\nimport fetchLanis from '../functions/fetchLanis';\r\nimport BetterList from './BetterList';\r\nimport Button from './Button';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useDev } from '../contexts/DevContext';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nexport default function BetterBoard({ match }) {\r\n    const auth = useAuth();\r\n    const devMode = useDev();\r\n    const boardId = match.params.id;\r\n    const [lists, setLists] = useLanisServer({\r\n        type: \"list\",\r\n        filter: boardId,\r\n        jwt: auth.token,\r\n        refreshRate: 5000\r\n    });\r\n    const [, drop] = useDrop(() => ({\r\n        accept: 'list',\r\n        canDrop: (list, monitor) => list.boardId !== boardId,\r\n        drop: (list, monitor) => boardId\r\n    }));\r\n\r\n    function addList(){\r\n        let caption = window.prompt(\"Give your group a caption\");\r\n        if (!caption) return;\r\n        let newLists = [...lists, {\r\n            id: uuid(),\r\n            boardId: boardId,\r\n            caption: caption,\r\n            modified: Date.now(),\r\n            seqNo: 0,\r\n            active: 1\r\n        }];\r\n        setLists(newLists);\r\n    }\r\n\r\n    function renameList(list) {\r\n        let caption = window.prompt(\"Rename list\", list.caption);\r\n        if (caption === \"\") {\r\n            let confirmDelete = window.prompt(\"Are you sure?\",\"no\");\r\n            if (confirmDelete === \"yes\") {\r\n                // old way of deleting\r\n                // let newLists = lists.filter(prevList => prevList.id !== list.id);\r\n                let newLists = lists.map(prevList => prevList.id === list.id ? {...prevList, modified: Date.now(), active: 1-prevList.active} : prevList);\r\n                setLists(newLists);\r\n            }\r\n            return;\r\n        }\r\n        if (!caption) return;\r\n        let newLists = lists.map(prevList => prevList.id === list.id ? {...prevList, caption: caption, modified: Date.now()} : prevList);\r\n        setLists(newLists);\r\n    }\r\n\r\n    //#region styles\r\n    const containerStyle = {\r\n        maxHeight: \"calc(100vh - 35px - 16px)\",\r\n        overflowY: \"auto\"\r\n    };\r\n    const boardStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"space-evenly\",\r\n        alignItems: \"flex-start\"\r\n    };\r\n    const breakStyle={\r\n        flexBasis: \"100%\",\r\n        height: \"0\"\r\n    };\r\n    //#endregion\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={boardStyle}>\r\n                <Button caption=\"+Group\" onClick={addList}/>\r\n                <div style={breakStyle}></div>\r\n                {\r\n                    lists && lists.filter(list => list.active === 1).map(list => {\r\n                        return (\r\n                            <BetterList key={list.id} list={list} onCaptionRightClick={renameList}/>\r\n                        );\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { useTheme } from '../contexts/ThemeContext';\r\n\r\nexport default function ToggleIcon({ active, onClick, caption, tooltip }) {\r\n    const theme = useTheme();\r\n\r\n    const iconStyle = {\r\n        cursor: \"pointer\",\r\n        margin: \"0 3px\"\r\n    };\r\n    return (\r\n        <div style={iconStyle} onClick={(e) => onClick && onClick()} title={tooltip && tooltip}>\r\n            <svg viewBox=\"-50 -50 100 100\" height=\"20px\" width=\"20px\">\r\n                <rect x=\"-50\" y=\"-50\" height=\"100\" width=\"100\" rx=\"30\" ry=\"30\" fill={active ? theme.accent1 : theme.accent2}/>\r\n                <text x=\"0\" y=\"0\" fill=\"white\" fontSize=\"50\" textAnchor=\"middle\" dominantBaseline=\"middle\">{caption && caption}</text>\r\n            </svg>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Route, Switch, NavLink } from 'react-router-dom';\r\nimport fetchLanis from '../functions/fetchLanis';\r\nimport fetchLanisShare from '../functions/fetchLanisShare';\r\nimport useLanisServer from '../hooks/useLanisServer';\r\nimport BetterBoard from './BetterBoard';\r\nimport { useTheme, useThemeUpdate } from '../contexts/ThemeContext';\r\nimport Button from './Button';\r\nimport uuid from 'react-uuid';\r\nimport ToggleIcon from './ToggleIcon';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useDev } from '../contexts/DevContext';\r\n\r\nexport default function BetterLists() {\r\n    const auth = useAuth();\r\n    const [boards, setBoards] = useLanisServer({\r\n        type: \"board\",\r\n        filter: \"\",\r\n        jwt: auth.token,\r\n        refreshRate: 10000\r\n    });\r\n    const theme = useTheme();\r\n    const setTheme = useThemeUpdate();\r\n    const [sharePopup, setSharePopup] = useState(false);\r\n    const [shareRecipients, setShareRecipients] = useState();\r\n    const [users, setUsers] = useState([]);\r\n\r\n    const devMode = useDev();\r\n\r\n    useEffect(() => {\r\n        async function fetchUsers() {\r\n            const serverResponse = await fetchLanis({\r\n                type: \"user\",\r\n                jwt: auth.token,\r\n                action: \"select\"\r\n            }, devMode);\r\n            const receivedUsers = await serverResponse.json();\r\n            setUsers(receivedUsers);\r\n        }\r\n\r\n        fetchUsers();\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        async function fetchOwners() {\r\n            const serverResponse = await fetchLanisShare({\r\n                jwt: auth.token,\r\n                action: \"view\",\r\n                resourceId: boards.find(b => window.location.href.includes(b.id)).id\r\n            }, devMode);\r\n            if (serverResponse.status !== 200) {\r\n                const err = await serverResponse.text();\r\n                console.log(err);\r\n                return;\r\n            };\r\n            const receivedUsers = await serverResponse.json();\r\n            setShareRecipients(receivedUsers);\r\n        }\r\n\r\n        !sharePopup && setShareRecipients(undefined);\r\n        sharePopup && fetchOwners();\r\n\r\n    }, [sharePopup]);\r\n\r\n    function addBoard() {\r\n        let caption = window.prompt(\"Give your list a caption\");\r\n        if (!caption) return;\r\n        let newBoards = [...boards, {\r\n            id: uuid(),\r\n            caption: caption,\r\n            modified: Date.now(),\r\n            seqNo: 0,\r\n            active: 1\r\n        }];\r\n        setBoards(newBoards);\r\n    }\r\n\r\n    function renameBoard(board) {\r\n        let caption = window.prompt(\"Rename list\", board.caption);\r\n        if (caption === \"\") {\r\n            let confirmDelete = window.prompt(\"Sure you want to delete list?\",\"no\");\r\n            if (confirmDelete === \"yes\") {\r\n                // old way of deleting\r\n                // let newBoards = boards.filter(prevBoard => prevBoard.id !== board.id);\r\n                let newBoards = boards.map(prevBoard => prevBoard.id === board.id ? {...prevBoard, modified: Date.now(), active: 1-prevBoard.active} : prevBoard);\r\n                setBoards(newBoards);\r\n            }\r\n            return;\r\n        }\r\n        if (!caption) return;\r\n        let newBoards = boards.map(prevBoard => prevBoard.id === board.id ? {...prevBoard, caption: caption, modified: Date.now()} : prevBoard);\r\n        setBoards(newBoards);\r\n    }\r\n\r\n    //#region styles\r\n    const listsStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\"\r\n    };\r\n    const leftStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"stretch\"\r\n    };\r\n    const linkStyle = {\r\n        borderRadius: \"5px\",\r\n        textDecoration: \"none\",\r\n        textAlign: \"center\",\r\n        marginTop: \"1px\",\r\n        padding: \"10px\",\r\n        whiteSpace: \"nowrap\",\r\n        fontSize: theme.fontSize + \"em\"\r\n    };\r\n    const linkInactiveStyle = {\r\n        ...linkStyle,\r\n        backgroundColor: theme.accent2,\r\n        color: theme.accent1\r\n    };\r\n    const linkActiveStyle = {\r\n        ...linkStyle,\r\n        backgroundColor: theme.accent1,\r\n        color: theme.accent2\r\n    };\r\n    const rightStyle = {\r\n        flexGrow: \"1\",\r\n    };\r\n    const toolbarStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"flex-start\",\r\n        flexGrow: \"1\",\r\n        marginTop: \"20px\"\r\n    };\r\n    const backdropStyle = {\r\n        display: sharePopup ? \"flex\" : \"none\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        left: \"0\",\r\n        top: \"0\",\r\n        backgroundColor: \"rgba(0,0,0,0.6)\"\r\n    };\r\n    const popupStyle = {\r\n        border: `2px solid ${theme.accent1}`,\r\n        backgroundColor: \"#fff\",\r\n        padding: \"5px 20px\",\r\n        borderRadius: \"5px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\"\r\n    };\r\n    const popupHeaderStyle = {\r\n        color: theme.accent1,\r\n        margin: \"0px 5px 5px 5px\"\r\n    };\r\n    const shareHeadingStyle = {\r\n        color: theme.accent1,\r\n        margin: \"5px 0 0 0\"\r\n    };\r\n    const recipientBoxStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"start\",\r\n        alignSelf: \"center\"\r\n    };\r\n    const recipientStyle = {\r\n        fontSize: \"0.8em\",\r\n        marginLeft: \"5px\"\r\n    };\r\n    const removeRecipientStyle = {\r\n        fontWeight: \"bold\",\r\n        fontSize: \"0.8em\",\r\n        color: theme.accent1,\r\n        marginLeft: \"4px\",\r\n        cursor: \"pointer\"\r\n    };\r\n    const shareFormStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"start\"\r\n    };\r\n    //#endregion\r\n\r\n    return (\r\n        <div style={listsStyle}>\r\n            <div style={leftStyle}>\r\n                {\r\n                    boards && boards.filter(board => board.active === 1).map(board => {\r\n                        return (\r\n                            <NavLink to={`/lists/${board.id}`} key={board.id} style={linkInactiveStyle} activeStyle={linkActiveStyle}>\r\n                                <div key={board.id} onContextMenu={(e) => {\r\n                                        e.preventDefault();\r\n                                        renameBoard(board);\r\n                                    }}>\r\n                                    {board.caption}\r\n                                </div>\r\n                            </NavLink>\r\n                        )\r\n                    })\r\n                }\r\n                <Button caption=\"+List\" onClick={addBoard}/>\r\n                <div style={toolbarStyle}>\r\n                    <ToggleIcon active={theme?.shoppingMode} onClick={() => setTheme(prevTheme => {return {...prevTheme, shoppingMode: !prevTheme?.shoppingMode}})} caption=\"SM\" tooltip=\"Shopping Mode\"/>\r\n                    <ToggleIcon active={true} onClick={() => {\r\n                        const currentBoard = boards.find(b => window.location.href.includes(b.id));\r\n                        if (!!currentBoard) {\r\n                            setSharePopup(true)\r\n                        } else {\r\n                            window.alert(\"Select a list to share!\");\r\n                        }\r\n                    }} caption=\"SH\" tooltip=\"Share list...\"/>\r\n                </div>\r\n            </div>\r\n            <div style={rightStyle}>\r\n                    <Switch>\r\n                        <Route path=\"/lists/:id\" exact component={BetterBoard}/>\r\n                    </Switch>\r\n            </div>\r\n            <div style={backdropStyle} onClick={(e) => setSharePopup(false)}>\r\n                <div style={popupStyle} onClick={(e) => e.stopPropagation()}>\r\n                    <h4 style={popupHeaderStyle}>\r\n                        {boards.find(b => window.location.href.includes(b.id))?.caption}\r\n                    </h4>\r\n                    <form style={shareFormStyle}>\r\n                        <div style={shareHeadingStyle}>\r\n                            Shared with:\r\n                        </div>\r\n                        <div style={recipientBoxStyle}>\r\n                            {shareRecipients ? shareRecipients.map(rec => (\r\n                                <div key={rec}>\r\n                                    <span style={removeRecipientStyle} onClick={(e) => {\r\n                                        if (shareRecipients.length === 1) {\r\n                                            window.alert(\"Cannot leave a list without users!\");\r\n                                            return;\r\n                                        }\r\n                                        fetchLanisShare({\r\n                                            jwt: auth.token,\r\n                                            action: \"unshare\",\r\n                                            userName: rec,\r\n                                            resourceId: boards.find(b => window.location.href.includes(b.id))?.id\r\n                                        }, devMode).then(res => {\r\n                                            if (res.status === 200) {\r\n                                                setShareRecipients(prev => prev.filter(r => r !== rec));\r\n                                            }\r\n                                        });\r\n                                    }}>X</span>\r\n                                    <span style={recipientStyle}>{rec}</span>\r\n                                </div>\r\n                            )) : \"Loading...\"}\r\n                        </div>\r\n                        <div style={shareHeadingStyle}>\r\n                            Share with...\r\n                        </div>\r\n                        <input list=\"shareUsers\" onChange={(e) => {\r\n                            let curVal = e.target.value;\r\n                            e.target.value = \"\";\r\n                            let selectedUser = users.find(u => u.userName === curVal);\r\n                            if (!selectedUser) return;\r\n                            fetchLanisShare({\r\n                                jwt: auth.token,\r\n                                action: \"share\",\r\n                                userName: selectedUser.userName,\r\n                                resourceId: boards.find(b => window.location.href.includes(b.id))?.id\r\n                            }, devMode).then(res => {\r\n                                if (res.status === 200) {\r\n                                    setShareRecipients(prev => [...prev, selectedUser.userName]);\r\n                                } else {\r\n                                    setSharePopup(false);\r\n                                    console.log(res);\r\n                                }\r\n                            });\r\n                        }}/>\r\n                        <datalist id=\"shareUsers\">\r\n                            {users.filter(user => shareRecipients ? !shareRecipients.find(rec => rec === user.userName) : true).map(user => <option key={user.userName} value={user.userName}/>)}\r\n                        </datalist>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Route, Switch, NavLink } from 'react-router-dom';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\n\r\nexport default function SportsMenu() {\r\n    const theme = useTheme();\r\n    const sportOptions = [\r\n        {path: \"/sports/squash\",caption: \"Squash\",},\r\n        {path: \"/sports/tennis\",caption: \"Tennis\",},\r\n        {path: \"/sports/gym\",caption: \"Gym\",},\r\n    ];\r\n    const menuStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-evenly\",\r\n        alignItems: \"center\",\r\n        height: \"100%\"\r\n    };\r\n    const linkStyle = {\r\n        display: \"flex\",\r\n        textDecoration: \"none\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        backgroundColor: theme.accent1,\r\n        color: theme.accent2,\r\n        aspectRatio: \"1 / 1\",\r\n        minWidth: \"110px\",\r\n        cursor: \"pointer\",\r\n        fontSize: \"1.4em\",\r\n        borderRadius: \"5px\"\r\n    };\r\n    return (\r\n        <div style={menuStyle}>\r\n            {\r\n                sportOptions.map(option => (\r\n                    <NavLink key={option.path} to={option.path} style={linkStyle}>\r\n                            {option.caption}\r\n                    </NavLink>\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\n\r\nconst victoryPoints = 2;\r\nconst lossPoints = 1;\r\n\r\nexport default function Squash() {\r\n    const theme = useTheme();\r\n    const [players, setPlayers] = useState([]);\r\n    const [results, setResults] = useState([]);\r\n\r\n    useEffect(() => {\r\n        setPlayers(prevPlayers => prevPlayers.map(player => {\r\n            return {\r\n                name: player.name,\r\n                points: results.filter(res => (res.playerA === player.name && res.pointsA > res.pointsB) || (res.playerB === player.name && res.pointsB > res.pointsA)).length * victoryPoints + results.filter(res => (res.playerA === player.name && res.pointsA < res.pointsB) || (res.playerB === player.name && res.pointsB < res.pointsA)).length * lossPoints,\r\n                tiebreak: results.reduce((prev, cur) => prev + (cur.playerA === player.name ? cur.pointsA - cur.pointsB : 0) + (cur.playerB === player.name ? cur.pointsB - cur.pointsA : 0), 0),\r\n                games: [...results.filter(res => res.playerA === player.name).map(res => ({ against: res.playerB, scored: res.pointsA, lost: res.pointsB })), ...results.filter(res => res.playerB === player.name).map(res => ({ against: res.playerA, scored: res.pointsB, lost: res.pointsA }))]\r\n            };\r\n        }).sort((a,b) => b.points - a.points + b.tiebreak/1000 - a.tiebreak/1000));\r\n    }, [results]);\r\n\r\n    function addPlayer() {\r\n        let newPlayerName = window.prompt(\"New player\");\r\n        !!newPlayerName && setPlayers(prev => [...prev, { name: newPlayerName }]);\r\n    }\r\n    function removePlayer(playerName) {\r\n        setPlayers(prev => prev.filter(prevPlayer => prevPlayer.name !== playerName));\r\n    }\r\n    function addResult(playerA, playerB) {\r\n        let newPointsA = window.prompt(\"Points for \" + playerA);\r\n        let newPointsB = window.prompt(\"Points for \" + playerB);\r\n        newPointsA && newPointsB && setResults(prevResults => [...prevResults, {\r\n            playerA: playerA,\r\n            playerB: playerB,\r\n            pointsA: parseInt(newPointsA),\r\n            pointsB: parseInt(newPointsB)\r\n        }]);\r\n    }\r\n\r\n    const squashStyle = {\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    };\r\n    const selfStyle = {\r\n        backgroundColor: \"#aaa\",\r\n    };\r\n    const otherStyle = {\r\n        textAlign: \"center\",\r\n        cursor: \"pointer\"\r\n    };\r\n\r\n    console.log(players);\r\n    return (\r\n        <div style={squashStyle}>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Points</th>\r\n                        {\r\n                            players.map(player => (\r\n                                <th key={\"th_\" + player.name}>{player.name}</th>\r\n                            ))\r\n                        }\r\n                        <th>TB</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        players.map((player, rank) => {\r\n                            return (\r\n                                <tr key={\"tb_\" + player.name}>\r\n                                    <td>\r\n                                        <span style={{\r\n                                            backgroundColor: theme.accent2,\r\n                                            color: theme.accent1,\r\n                                            padding: \"0 3px\",\r\n                                            marginRight: \"5px\",\r\n                                            cursor: \"pointer\"\r\n                                        }} onClick={(e) => removePlayer(player.name)}>\r\n                                            X\r\n                                        </span>\r\n                                        {rank+1 + \". \" + player.name}\r\n                                    </td>\r\n                                    <td style={{textAlign: \"center\"}}>\r\n                                        {player.points}\r\n                                    </td>\r\n                                    {\r\n                                        players.map(playerIn => {\r\n                                            let game = player?.games?.find(game => game.against === playerIn.name);\r\n                                            let scoreText = game ? game.scored + \"-\" + game.lost : \"?\";\r\n                                            return (\r\n                                                <td key={player.name + \"_\" + playerIn.name} style={player.name === playerIn.name ? selfStyle : otherStyle} onClick={(e) => addResult(player.name, playerIn.name)}>\r\n                                                    {player.name === playerIn.name ? null : scoreText}\r\n                                                </td>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                    <td style={{textAlign: \"center\"}}>\r\n                                        {player.tiebreak}\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })\r\n                    }\r\n                    <tr>\r\n                        <td>\r\n                            <div style={{\r\n                                backgroundColor: theme.accent1,\r\n                                color: theme.accent2,\r\n                                borderRadius: \"5px\",\r\n                                padding: \"2px 5px\",\r\n                                cursor: \"pointer\",\r\n                                textAlign: \"center\"\r\n                            }} onClick={(e) => {\r\n                                addPlayer()\r\n                            }}>\r\n                                +Player\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Gym() {\r\n    const gymStyle = {\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    };\r\n    return (\r\n        <div style={gymStyle}>\r\n            Hello Gym\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport styles from './Ingredient.module.css';\r\nimport { useDrag } from 'react-dnd';\r\n\r\nexport default function Ingredient(props) {\r\n    const [collected, drag] = useDrag(() => ({\r\n        type: 'ingredient',\r\n        item: {...props}\r\n    }));\r\n    return (\r\n        <div className={styles.body} ref={drag}>\r\n            {props.caption && <div className={styles.caption}>{props.caption}</div>}\r\n            {props.amount && <div className={styles.amount}>\r\n                <span className={styles.amountQuantity}>{props.amount}</span>\r\n                {props.unit && <span className={styles.amountUnits}>{props.unit}</span>}\r\n            </div>}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport styles from './CookingStage.module.css';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport classNames from 'classnames';\r\nimport Ingredient from './Ingredient';\r\n\r\nexport default function CookingStage(props) {\r\n    const [collected, drop] = useDrop(() => ({\r\n        accept: ['ingredient','stage'],\r\n        canDrop: (item, monitor) => true,\r\n        drop: (item, monitor) => {\r\n            props.onDrop && props.onDrop(item, props.id);\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    }));\r\n    const [dragCollected, drag] = useDrag(() => ({\r\n        type: 'stage',\r\n        item: {...props}\r\n    }));\r\n    const fieldsetClassName = classNames({\r\n        [styles.frame]: true,\r\n        [styles.empty]: !props.children,\r\n        [styles.receiving]: collected.isOver\r\n    });\r\n    const captionLegend = <legend>{props.caption}</legend>;\r\n    return (\r\n        <div className={styles.body} ref={drop}>\r\n            <fieldset className={fieldsetClassName} ref={drag}>\r\n                {!!props.caption && captionLegend}\r\n                <div>\r\n                    {props.children?.map((value, index) => {\r\n                        switch (value.type) {\r\n                            case 'ingredient':\r\n                                return <Ingredient key={value.id} caption={value.caption} amount={value.amount} unit={value.unit}/>;\r\n                            case 'stage':\r\n                                return <CookingStage key={value.id} caption={value.caption}>\r\n                                    {value.children}\r\n                                </CookingStage>;\r\n                            default:\r\n                                return undefined;\r\n                        }\r\n                    })}\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport Ingredient from './Ingredient';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\n\r\nexport default function Group(props) {\r\n    console.log(\"group render props\");\r\n    console.log(props);\r\n    const [dropCollected, dropRef] = useDrop(() => ({\r\n        accept: ['ingredient','group'],\r\n        canDrop: (item, monitor) => true,\r\n        drop: (item, monitor) => {\r\n            console.log(\"drop item\");\r\n            console.log(item);\r\n            handleDrop(item);\r\n        },\r\n        collect: monitor => ({\r\n            isOver: !!monitor.isOver()\r\n        })\r\n    }));\r\n    const [dragCollected, dragRef] = useDrag(() => ({\r\n        type: 'group',\r\n        item: {...props}\r\n    }));\r\n    const caption = props.caption && props.caption;\r\n    function handleDrop(droppedItem) {\r\n        console.log(\"handleDrop old props\");\r\n        console.log(props);\r\n        const updatedProps = {\r\n            ...props,\r\n            items: [...props.items, {...droppedItem}]\r\n        };\r\n        console.log(\"handleDrop updatedProps\");\r\n        console.log(updatedProps);\r\n        props.onChange && props.onChange(updatedProps);\r\n    };\r\n    function handleChange(newValue) {\r\n        !!props.onChange && props.onChange(\r\n            {\r\n                ...props,\r\n                items: props.items.map(\r\n                    prevItem => prevItem.id === newValue.id\r\n                        ? newValue\r\n                        : prevItem\r\n                )\r\n            }\r\n        )\r\n    };\r\n    const contents = props.items?.map(\r\n        item => {\r\n            switch (item.type) {\r\n                case 'group':\r\n                    return <Group\r\n                        key={item.id}\r\n                        id={item.id}\r\n                        caption={item.caption}\r\n                        items={item.items}\r\n                        onChange={handleChange}\r\n                    />\r\n                case 'ingredient':\r\n                    return <Ingredient\r\n                        key={item.id}\r\n                        id={item.id}\r\n                        caption={item.caption}\r\n                        amount={item.amount}\r\n                        unit={item.unit}\r\n                    />\r\n                default:\r\n                    return undefined;\r\n            }\r\n        }\r\n    );\r\n\r\n    return (\r\n        <fieldset>\r\n            {!!caption && <legend ref={dragRef}>{caption}</legend>}\r\n            <div ref={dropRef}>\r\n                {contents}\r\n            </div>\r\n        </fieldset>\r\n    );\r\n};","import React from 'react';\r\nimport styles from './Popup.module.css';\r\n\r\nexport default function Popup(props) {\r\n    return (\r\n        <div className={styles.background} onClick={props.onClose}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport styles from './StringField.module.css';\r\n\r\nexport default function StringField(props) {\r\n    return (\r\n        <div className={styles.body}>\r\n            <label className={styles.label}>{props.caption}: </label>\r\n            <input className={styles.input} type='text' defaultValue={props.value} onChange={props.onChange}/>\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport styles from './NumberField.module.css';\r\n\r\nexport default function NumberField(props) {\r\n    return (\r\n        <div className={styles.body}>\r\n            <label className={styles.label}>{props.caption}: </label>\r\n            <input className={styles.input} type='number' defaultValue={props.value} onChange={props.onChange}/>\r\n        </div>\r\n    )\r\n};","import React, { useState, useEffect } from 'react';\r\nimport StringField from './StringField';\r\nimport NumberField from './NumberField';\r\nimport styles from './Form.module.css';\r\nimport Button from './Button.js';\r\n\r\nexport default function Form(props) {\r\n    const sourceObject = props.data;\r\n    const caption = Object.keys(sourceObject)[0];\r\n    const displayObject = sourceObject[caption];\r\n    const [formResult, setFormResult] = useState({...displayObject});\r\n\r\n    function updateResult(key, value) {\r\n        setFormResult(prevResult => ({\r\n            ...prevResult,\r\n            [key]: value\r\n        }));\r\n    };\r\n\r\n    function handleCallback(callback) {\r\n        callback(formResult);\r\n    };\r\n\r\n    useEffect(() => {\r\n        props.onUpdate && props.onUpdate(caption, formResult);\r\n    }, [formResult]);\r\n    \r\n    const fields = Object.keys(displayObject).map((key, index) => {\r\n        switch (typeof displayObject[key]) {\r\n            case 'string':\r\n                return <StringField key={key} caption={key} value={displayObject[key]} onChange={(e) => updateResult(key, e.target.value)}/>;\r\n            \r\n            case 'number':\r\n                return <NumberField key={key} caption={key} value={displayObject[key]} onChange={(e) => updateResult(key, e.target.value)}/>;\r\n                \r\n            case 'object':\r\n                if (displayObject[key] === null) {\r\n                    return <StringField key={key} caption={key} value={displayObject[key]}/>;\r\n                } else {\r\n                    return <Form key={key} data={{[key]: displayObject[key]}} onUpdate={updateResult}/>;\r\n                }   \r\n            \r\n            case 'function':\r\n                return <Button key={key} caption={key} onClick={() => handleCallback(displayObject[key])}/>;\r\n\r\n            case 'undefined':\r\n                return undefined;\r\n            \r\n            default:\r\n                return <div key={key} className={styles.jsonField}>{JSON.stringify({[key]: displayObject[key]},undefined,1)}</div>\r\n        }\r\n    });\r\n    return (\r\n        <fieldset className={styles.border}>\r\n            {!!caption && <legend className={styles.caption}>{caption}</legend>}\r\n            <div className={styles.fields}>\r\n                {fields}\r\n            </div>\r\n        </fieldset>\r\n    )\r\n};","import React, { useState } from 'react';\r\nimport uuid from 'react-uuid';\r\nimport styles from './Cookbook.module.css';\r\nimport classNames from 'classnames';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport Ingredient from './Ingredient';\r\nimport CookingStage from './CookingStage';\r\nimport Group from './Group';\r\nimport Popup from './Popup';\r\nimport Form from './Form';\r\n\r\n\r\nfunction createIngredientComponent({id, name, amount, unit}) {\r\n    return <Ingredient key={id} type='ingredient' id={id} caption={name} amount={amount} unit={unit}/>;\r\n}\r\n\r\nconst ingredientData = [\r\n    {\r\n        type: 'ingredient',\r\n        id: uuid(),\r\n        name: 'Pasta',\r\n        amount: 300,\r\n        unit: 'g'\r\n    },{\r\n        type: 'ingredient',\r\n        id: uuid(),\r\n        name: 'Water',\r\n        amount: null,\r\n        unit: 'ml'\r\n    },{\r\n        type: 'ingredient',\r\n        id: uuid(),\r\n        name: 'Salt',\r\n        amount: 1,\r\n        unit: 'pinch',\r\n    },\r\n];\r\n\r\nexport default function Cookbook() {\r\n    const [lanes, setLanes] = useState([]);\r\n    const [stages, setStages] = useState([]);\r\n    const [popupQueue, setPopupQueue] = useState([]);\r\n\r\n    console.log(\"lanes\");\r\n    console.log(lanes);\r\n\r\n    function closePopup() {\r\n        setPopupQueue(queue => queue.slice(1));\r\n    };\r\n\r\n    const ingredients = ingredientData.map(createIngredientComponent);\r\n    \r\n    function handleDrop(item, stageId) {\r\n        console.log(item);\r\n        if (!stageId) {\r\n            // new stage being created\r\n            setPopupQueue(queue => [...queue, {\r\n                newStage: {\r\n                    stageName: '',\r\n                    stageDuration: 0,\r\n                    addIngredients: {\r\n                        [item.caption]: {\r\n                            amount: 0\r\n                        }\r\n                    },\r\n                    Add: (formResult) => {\r\n                        console.log(formResult);\r\n                        setStages(prevStages => [...prevStages, {\r\n                            id: uuid(),\r\n                            caption: formResult.stageName,\r\n                            ingredients: [\r\n                                {\r\n                                    id: item.id,\r\n                                    amount: formResult.addIngredients[item.caption].amount\r\n                                }\r\n                            ]\r\n                        }]);\r\n                        closePopup();\r\n                    }\r\n                }\r\n            }]);\r\n            return;\r\n        }\r\n    };\r\n\r\n    function newLane(item, laneId) {\r\n        console.log(item);\r\n        switch (item.type) {\r\n            case 'ingredient':\r\n                const newStageCaption = window.prompt(\"New stage caption\");\r\n                setLanes(prevLanes => [...prevLanes, {\r\n                    id: uuid(),\r\n                    stages: [{\r\n                        id: uuid(),\r\n                        caption: newStageCaption,\r\n                        items: [{...item}]\r\n                    }],\r\n                }]);\r\n                break;\r\n            case 'stage':\r\n                setLanes(prevLanes => [...prevLanes, {\r\n                    id: uuid(),\r\n                    stages: [\r\n                        {...item}\r\n                    ]\r\n                }]);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    const currentPopup = popupQueue[0] && popupQueue[0];\r\n    // console.log(stages);\r\n\r\n    return (\r\n        <div className={styles.body}>   \r\n            <div key={uuid()} className={styles.ingredients}>\r\n                {ingredients}\r\n            </div>\r\n\r\n            <div className={styles.lanes}>\r\n                {lanes.map((lane, laneIndex) => {\r\n                    return <div key={lane.id}>\r\n                        {lane.stages.map(stage => {\r\n                            return <Group\r\n                                key={stage.id}\r\n                                id={stage.id}\r\n                                caption={stage.caption}\r\n                                items={stage.items}\r\n                                onChange={(newValue) => {\r\n                                    console.log(\"onchange\");\r\n                                    console.log(newValue);\r\n                                    setLanes(prevLanes => prevLanes.map(\r\n                                        prevLane => prevLane.id === lane.id\r\n                                            ? {\r\n                                                ...prevLane,\r\n                                                stages: prevLane.stages.map(\r\n                                                    prevStage => prevStage.id === stage.id\r\n                                                        ? newValue\r\n                                                        : prevStage\r\n                                                )\r\n                                            }\r\n                                            : prevLane\r\n                                    ))\r\n                                }}\r\n                            />\r\n                        })}\r\n                    </div>;\r\n                })}\r\n\r\n                <div className='newLane'>\r\n                    <CookingStage key='newLane' onDrop={newLane}/>\r\n                </div>\r\n            </div>\r\n\r\n            {popupQueue.length > 0 && <Popup key={JSON.stringify(currentPopup)}>\r\n                <Form key='asdf' data={currentPopup}/>\r\n            </Popup>}\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\n\r\nexport default function Fifths() {\r\n    return (\r\n        <div>\r\n            Hello fifths!\r\n        </div>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/correct.01541daa.mp3\";","export default __webpack_public_path__ + \"static/media/incorrect.fa5903e8.mp3\";","import React, { useState, useEffect, useRef } from 'react';\r\nimport fetchLanis from '../../../functions/fetchLanis';\r\nimport './WordPop.css';\r\nimport 'classnames';\r\nimport uuid from 'react-uuid';\r\nimport classNames from 'classnames';\r\nimport correctAudio from './correct.mp3';\r\nimport incorrectAudio from './incorrect.mp3'\r\nimport { useDev } from '../../../contexts/DevContext';\r\n\r\n// const incorrectAudio = new Audio('./incorrect.mp3');\r\nconst correctSound = new Audio(correctAudio);\r\nconst incorrectSound = new Audio(incorrectAudio);\r\n\r\nexport default function WordPop() {\r\n    function playCorrect() {\r\n        correctSound.pause();\r\n        correctSound.currentTime = 0;\r\n        incorrectSound.pause();\r\n        incorrectSound.currentTime = 0;\r\n        correctSound.play();\r\n    };\r\n    function playIncorrect() {\r\n        correctSound.pause();\r\n        correctSound.currentTime = 0;\r\n        incorrectSound.pause();\r\n        incorrectSound.currentTime = 0;\r\n        incorrectSound.play();\r\n    };\r\n    const [bubbles, setBubbles] = useState([]);\r\n    const [dictionary, setDictionary] = useState([]);\r\n    const [score, setScore] = useState(0);\r\n    const [missedWords, setMissedWords] = useState([]);\r\n    const lifeSymbol = '\\u2764';\r\n    const [lives, setLives] = useState(5);\r\n\r\n    let newWordInterval = useRef();\r\n\r\n    const devMode = useDev();\r\n\r\n    useEffect(() => {\r\n        if (!dictionary.length) return;\r\n        newWordInterval.current = setInterval(() => {\r\n            addRandomWord();\r\n        }, 1000);\r\n\r\n        return () => clearInterval(newWordInterval.current);\r\n    }, [dictionary]);\r\n\r\n    function generateFakeNouns(nouns) {\r\n        function genFakes(noun) {\r\n            let fakes = [];\r\n            for (let i=0; i<noun.length; i++) {\r\n                const l = noun.substring(i,i+1);\r\n                let fn = null;\r\n                switch (l) {\r\n                    case 'a':\r\n                        fn = `${noun.substring(0,i)}ā${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'ā':\r\n                        fn = `${noun.substring(0,i)}a${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'e':\r\n                        fn = `${noun.substring(0,i)}ē${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'ē':\r\n                        fn = `${noun.substring(0,i)}e${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'i':\r\n                        fn = `${noun.substring(0,i)}ī${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'ī':\r\n                        fn = `${noun.substring(0,i)}i${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'u':\r\n                        fn = `${noun.substring(0,i)}ū${noun.substring(i+1)}`;\r\n                        break;\r\n                    case 'ū':\r\n                        fn = `${noun.substring(0,i)}u${noun.substring(i+1)}`;\r\n                        break;\r\n                }\r\n                fn && fakes.push(fn);\r\n            }\r\n            return fakes;\r\n        }\r\n        let fakeNouns = [];\r\n        nouns.forEach(n => {\r\n            fakeNouns.push(...genFakes(n.nom));\r\n        })\r\n        return fakeNouns;\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function getNouns() {\r\n            const res = await fetchLanis({\r\n                type: 'noun',\r\n                action: 'select'\r\n            }, devMode);\r\n            if (res.status === 200) {\r\n                const nouns = await res.json();\r\n                const fakeNouns = generateFakeNouns(nouns);\r\n                setDictionary([...nouns.map(n => ({\r\n                    id: n.id,\r\n                    latvian: n.nom,\r\n                    english: n.eng\r\n                })),...fakeNouns.map(fn => ({id: uuid(), latvian: fn}))]);\r\n            }\r\n        };\r\n\r\n        getNouns();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (lives === 0) {\r\n            setBubbles(prev => prev.map(b => ({...b, class:{...b.class, WordPopPaused: true}})));\r\n            clearInterval(newWordInterval.current);\r\n        }\r\n\r\n\r\n    }, [lives]);\r\n\r\n    function addRandomWord() {\r\n        const dictionaryIndex = Math.round((dictionary.length-1)*Math.random());\r\n        const targetWord = dictionary[dictionaryIndex];\r\n        const horizontalPosition = Math.random();\r\n        let posStyle = {};\r\n        if (horizontalPosition > 0.5) {\r\n            posStyle = {\r\n                right: `${Math.round((1-horizontalPosition)*100).toString()}%`\r\n            };\r\n        } else {\r\n            posStyle = {\r\n                left: `${Math.round((horizontalPosition)*100).toString()}%`\r\n            }\r\n        }\r\n        setBubbles(prev => [...prev, {\r\n            id: uuid(),\r\n            wordId: targetWord.id,\r\n            word: targetWord.latvian,\r\n            translation: targetWord.english || \"Gotcha!\",\r\n            posStyle: posStyle,\r\n            class: {\r\n                WordPopBubble: true,\r\n                WordPopUnpopped: true,\r\n                WordPopPopped: false,\r\n                WordPopBubbleRising: true,\r\n                WordPopGotcha: !targetWord.english\r\n            }\r\n        }]);\r\n    }\r\n\r\n    function popBubble(id, uncaught=false) {\r\n        const bubble = bubbles.find(b => b.id === id);\r\n        const dictionaryEntry = dictionary.find(d => d.id === bubble.wordId);\r\n\r\n        if (uncaught && !!dictionaryEntry.english) {\r\n            setMissedWords(prev => {\r\n                if (!prev.find(p => p.id === dictionaryEntry.id)) {\r\n                    // word not yet in missed words\r\n                    return [...prev, {...dictionaryEntry, missedCount: 1}];\r\n                } else {\r\n                    return prev.map(p => p.id === dictionaryEntry.id ? {...p, missedCount: p.missedCount+1} : p)\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!uncaught && !!dictionaryEntry.english) {\r\n            setMissedWords(prev => prev.filter(p => p.id !== dictionaryEntry.id));\r\n            // setLives(prev => Math.min(prev + 1,5));\r\n        }\r\n\r\n        if ((uncaught && !dictionaryEntry.english) || (!uncaught && !!dictionaryEntry.english)) {\r\n            // playCorrect();\r\n        } else {\r\n            // playIncorrect();\r\n            setLives(prev => Math.max(prev - 1,0));\r\n        }\r\n\r\n        setBubbles(prev => prev.map(b => b.id === id ? {\r\n            ...b,\r\n            class: {\r\n                ...b.class,\r\n                WordPopUnpopped: false,\r\n                WordPopPopped: true,\r\n                WordPopUncaught: uncaught\r\n            }\r\n        } : b));\r\n        const timer = setTimeout(() => {\r\n            setBubbles(prev => prev.filter(b => b.id !== id));\r\n        }, uncaught && !!dictionaryEntry.english ? 2000 : 500)\r\n    }\r\n\r\n    function handleBodyClick(e) {\r\n        // addRandomWord();\r\n    }\r\n\r\n    function handleBubbleClick(e) {\r\n        e.stopPropagation();\r\n        popBubble(e.target.parentElement.id);\r\n    }\r\n\r\n    function handleBubbleRisen(e) {\r\n        popBubble(e.target.id, true);\r\n    }\r\n\r\n    return (\r\n        <div className=\"WordPopBody\" onClick={handleBodyClick}>\r\n            {bubbles.map(b => (\r\n                <div id={b.id} key={b.id} className={classNames(b.class)} style={b.posStyle} onAnimationEnd={handleBubbleRisen}>\r\n                    <div className=\"WordPopContent\" onClick={handleBubbleClick}>\r\n                        {b.word}\r\n                    </div>\r\n                    <div className=\"WordPopResult\">\r\n                        {b.translation}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n            <div className=\"WordPopToolbar\">\r\n                {/* <div className=\"WordPopScore\">\r\n                    Score: {score}\r\n                </div> */}\r\n                <div className=\"WordPopLives\">\r\n                    {\r\n                        lives > 0 ? lifeSymbol.repeat(lives) : \"GAME OVER\"\r\n                    }\r\n                </div>\r\n                {/* <div className = \"WordPopMissed\">\r\n                    Missed: {missedWords.sort((a,b) => b.missedCount - a.missedCount).map(w => (\r\n                        <span key={w.id} className=\"WordPopMissedWord\">\r\n                            {w.latvian}({w.missedCount})\r\n                        </span>\r\n                    ))}\r\n                </div> */}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport uuid from 'react-uuid';\r\nimport fetchLanis from '../../functions/fetchLanis';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nexport default function Nouns() {\r\n    const auth = useAuth();\r\n    const dec = useRef();\r\n    const nom = useRef();\r\n    const eng = useRef();\r\n    const proper = useRef();\r\n\r\n    const [status, setStatus] = useState(\"Status text\");\r\n    const [err, setErr] = useState(false);\r\n    const [lastWord, setLastWord] = useState();\r\n\r\n    async function handleFormSubmit(e) {\r\n        e.preventDefault();\r\n        setStatus(\"\");\r\n        setErr(false);\r\n        const data = {\r\n            id: uuid(),\r\n            dec: parseInt(dec.current.value),\r\n            nom: nom.current.value,\r\n            eng: eng.current.value,\r\n            proper: proper.current.checked ? 1 : 0\r\n        };\r\n        if (data.id === \"\" || !data.dec || data.dec < 1 || data.dec > 6 || data.nom === \"\" || data.eng === \"\" || data.proper < 0 || data.proper > 1) {\r\n            setErr(true);\r\n            setStatus(\"Form incorrect!\");\r\n            return;\r\n        }\r\n        const res = await fetchLanis({\r\n            jwt: auth.token,\r\n            type: 'noun',\r\n            action: 'insert',\r\n            payload: [data]\r\n        }, true);\r\n        const resText = await res.text();\r\n        if (res.status !== 200) {\r\n            setErr(true);\r\n        } else {\r\n            nom.current.value=\"\";\r\n            eng.current.value=\"\";\r\n            nom.current.focus();\r\n            setLastWord(`${data.nom} - ${data.eng}`);\r\n        }\r\n        setStatus(`${res.status.toString()}: ${resText}`);\r\n    }\r\n\r\n    function handleNomBlur(e) {\r\n        const n = nom.current.value;\r\n        if (n.endsWith('is')) {\r\n        dec.current.value = 2;\r\n        } else if (n.endsWith('us')) {\r\n        dec.current.value = 3;\r\n        } else if (n.endsWith('s') || n.endsWith('š')) {\r\n            dec.current.value = 1;\r\n        } else if (n.endsWith('a')) {\r\n            dec.current.value = 4;\r\n        } else if (n.endsWith('e')) {\r\n            dec.current.value = 5;\r\n        } else {\r\n            dec.current.value = '';\r\n        }\r\n    }\r\n\r\n    const bodyStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        height: \"100%\",\r\n        alignItems: \"center\"\r\n    };\r\n    const formStyle = {\r\n        display: \"flex\",\r\n        flexDirection: \"column\"\r\n    };\r\n    const statusStyle = {\r\n        color: err ? \"red\" : \"green\"\r\n    };\r\n    const lastWordStyle = {\r\n        fontSize: \"0.7em\",\r\n        color: \"#ccc\"\r\n    };\r\n    return (\r\n        <div style={bodyStyle}>\r\n            <form style={formStyle} onSubmit={handleFormSubmit}>\r\n                <label htmlFor=\"nom\">Nominatīvs:</label>\r\n                <input type=\"text\" id=\"nom\" name=\"nom\" ref={nom} onBlur={handleNomBlur}></input>\r\n\r\n                <label htmlFor=\"dec\">Declension:</label>\r\n                <input type=\"number\" id=\"dec\" name=\"dec\" ref={dec}></input>\r\n\r\n                <label htmlFor=\"eng\">English:</label>\r\n                <input type=\"text\" id=\"eng\" name=\"eng\" ref={eng}></input>\r\n\r\n                <div>\r\n                    <input type=\"checkbox\" id=\"proper\" name=\"proper\" ref={proper}></input>\r\n                    <label htmlFor=\"proper\">Proper noun</label>\r\n                </div>\r\n\r\n                <input type=\"submit\" value=\"Submit\"/>\r\n            </form>\r\n            <div style={statusStyle}>\r\n                {status && status}\r\n            </div>\r\n            <div style={lastWordStyle}>\r\n                {lastWord && lastWord}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport fetchLanis from '../../../functions/fetchLanis';\r\nimport classNames from 'classnames';\r\nimport './VocabBuilder.css';\r\nimport { useDev } from '../../../contexts/DevContext';\r\n\r\nconst BATCH_SIZE = 10;\r\nconst OPTION_COUNT = 7;\r\nconst ADVANCE_DELAY = 1000;\r\n\r\nexport default function VocabBuilder() {\r\n    const [nouns, setNouns] = useState([]);\r\n    const [reverse, setReverse] = useState(false);\r\n    const [play, setPlay] = useState(false);\r\n    const [batch, setBatch] = useState([]);\r\n    const [round, setRound] = useState();\r\n    const [options, setOptions] = useState([]);\r\n    const [gameOver, setGameOver] = useState(false);\r\n\r\n    const devMode = useDev();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const resp = await fetchLanis({\r\n                type: 'noun',\r\n                action: 'select'\r\n            }, devMode);\r\n            if (resp.status !== 200) return;\r\n            const res = await resp.json();\r\n            setNouns(res);\r\n        })();\r\n    }, []);\r\n\r\n    function startGame(reverseGame = false) {\r\n        if (!nouns.length) return;\r\n        setReverse(reverseGame);\r\n        const newBatch = nouns\r\n            .sort(() => 0.5 - Math.random())\r\n            .slice(0, BATCH_SIZE);\r\n        const newOptions = newBatch.map(m => {\r\n            const decoys = nouns\r\n                .filter(f => reverseGame ? f.eng !== m.eng : f.nom !== m.nom)\r\n                .sort(() => 0.5 - Math.random())\r\n                .slice(0, OPTION_COUNT-1);\r\n            return [m, ...decoys]\r\n                .sort(() => 0.5 - Math.random());\r\n        });\r\n        setBatch(newBatch);\r\n        setOptions(newOptions);\r\n        setRound(0);\r\n        setGameOver(false);\r\n        setPlay(true);\r\n    };\r\n\r\n    function submitAnswer(option) {\r\n        if (gameOver) return;\r\n        const nextRound = batch.findIndex((v,i) => !('correct' in v) && i !== round);\r\n        setBatch(prev => prev.map((v, i) => i === round ? {...v, correct: batch[round].id === option.id, givenAnswer: option} : v));\r\n        setTimeout(() => {\r\n            nextRound > -1 ? setRound(nextRound) : setGameOver(true);\r\n        }, ADVANCE_DELAY);\r\n    };\r\n\r\n    return (\r\n        play ? (\r\n            <div className=\"VocabBuilderBody\">\r\n                <div className=\"VocabBuilderQuestion\">\r\n                    {reverse ? batch[round].nom : batch[round].eng}\r\n                </div>\r\n                <div className=\"VocabBuilderOptions\">\r\n                    {options[round].map(option => (\r\n                        <div\r\n                            key={`${round}:${option.id}`}\r\n                            onClick={() => !gameOver && !('correct' in batch[round]) && submitAnswer(option)}\r\n                            className={classNames({\r\n                                VocabBuilderCorrect: 'correct' in batch[round] && option.id === batch[round].id,\r\n                                VocabBuilderIncorrect: 'correct' in batch[round] && !(option.id === batch[round].id),\r\n                                VocabBuilderCurrent: 'correct' in batch[round] && batch[round].givenAnswer.id === option.id,\r\n                            })}\r\n                        >\r\n                            <div>\r\n                                {reverse ? option.eng : option.nom}\r\n                            </div>\r\n                            <div className=\"VocabBuilderAnswer\">\r\n                                {'correct' in batch[round] && (reverse ? option.nom : option.eng)}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <div className=\"VocabBuilderScore\">\r\n                    {batch.map((v, i) => (\r\n                        <span\r\n                            key={i}\r\n                            className={classNames({\r\n                                VocabBuilderCurrent: i === round,\r\n                                VocabBuilderCorrect: 'correct' in v && v.correct,\r\n                                VocabBuilderIncorrect: 'correct' in v && !v.correct,\r\n                            })}\r\n                            onClick={() => setRound(i)}\r\n                        >\r\n                            {i+1}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n                {gameOver && (\r\n                    <div className=\"VocabBuilderReplay\" onClick={() => gameOver && startGame(reverse)}>\r\n                        Play Again\r\n                    </div>\r\n                )}\r\n            </div>\r\n        ) : (\r\n            <div className=\"VocabBuilderMenu\">\r\n                <div className=\"VocabBuilderTitle\">\r\n                    Vocabulary Builder\r\n                </div>\r\n                <div className=\"VocabBuilderGameOptions\" onClick={() => startGame()}>\r\n                    <div onClick={(e) => startGame()}>\r\n                        English - Latvian\r\n                    </div>\r\n                    <div onClick={(e) => startGame(true)}>\r\n                        Latvian - English\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    )\r\n};","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport './GameMenu.css';\r\n\r\nconst GAMES = [\r\n    {\r\n        caption: \"VocabBuilder\",\r\n        link: \"/games/vocabbuilder\"\r\n    },{\r\n        caption: \"WordPop\",\r\n        link: \"/games/wordpop\"\r\n    },{\r\n        caption: 'Sylla-ble',\r\n        link: '/games/syllable'\r\n    }\r\n];\r\n\r\nexport default function GameMenu() {\r\n    return (\r\n        <div className=\"GameMenuBody\">\r\n            {GAMES.map(v => (\r\n                <NavLink key={v.link} to={v.link}>\r\n                    {v.caption}\r\n                </NavLink>\r\n            ))}\r\n        </div>\r\n    )\r\n};","import React, { useState, useEffect } from 'react';\r\nimport fetchLanis from '../../../functions/fetchLanis';\r\nimport classNames from 'classnames';\r\n\r\nconst OPTION_COUNT = 16;\r\n\r\nfunction breakIntoSyllables(word) {\r\n    switch (word) {\r\n        case 'garastāvoklis':\r\n            return ['ga', 'ra', 'stā', 'vo', 'klis'];\r\n        case 'ieeja':\r\n            return ['ie', 'e', 'ja'];\r\n        case 'augstums':\r\n            return ['augs', 'tums'];\r\n        case 'celtniecība':\r\n            return ['celt', 'nie', 'cī', 'ba'];\r\n        case 'pildspalva':\r\n            return ['pild', 'spal', 'va'];\r\n        case 'granātābols':\r\n            return ['gra', 'nāt', 'ā', 'bols'];\r\n        case 'situācija':\r\n            return ['si', 'tu', 'ā', 'ci', 'ja'];\r\n        case 'bibliotēka':\r\n            return ['bib', 'li', 'o', 'tē', 'ka'];\r\n        case 'uzacs':\r\n            return ['uz', 'acs'];\r\n        case 'pulkstenis':\r\n            return ['pulk', 'ste', 'nis'];\r\n        default:\r\n    }\r\n    const syllableRegex = /[^aāeēiīouū]*[aāeēiīouū]+(?:[^aāeēiīouū]*$|[^aāeēiīouū](?=[^aāeēiīouū]))?/gi;\r\n    if (word.endsWith('klis')) return [...breakIntoSyllables(word.substring(0,word.length-4)), 'klis'];\r\n    return word.match(syllableRegex);\r\n};\r\n\r\nexport default function Syllable() {\r\n    const [nouns, setNouns] = useState();\r\n    const [current, setCurrent] = useState();\r\n    useEffect(() => {\r\n        (async () => {\r\n            const resp = await fetchLanis({type: 'noun',action: 'select'}, window.location.href.includes('localhost'));\r\n            if (resp.status !== 200) return;\r\n            const res = await resp.json();\r\n            if (!res.length) return;\r\n            setNouns(\r\n                res.sort(() => 0.5 - Math.random())\r\n            );\r\n        })();\r\n    }, []);\r\n\r\n    function startGame() {\r\n        if (!nouns) return;\r\n        setCurrent(prev => {\r\n            const newIndex = prev ? (prev.index + 1) % nouns.length : 0;\r\n            const decoyWords = nouns\r\n                .filter((v, i) => i !== newIndex)\r\n                .sort(() => 0.5 - Math.random())\r\n                .slice(0, OPTION_COUNT)\r\n                .flatMap((t,v,i) => breakIntoSyllables(t.nom));\r\n            console.log(decoyWords);\r\n            return {\r\n                index: newIndex\r\n            };\r\n        });\r\n    };\r\n\r\n    if (!nouns) return (\r\n        <div className=\"SyllableLoading\">\r\n            Loading...\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            {current && nouns[current.index].nom}\r\n            <div className=\"SyllablePlay\" onClick={() => startGame()}>\r\n                Play Syllable\r\n            </div>\r\n            {nouns.map(n => (\r\n                <div key={n.id}>\r\n                    {n.nom}: {breakIntoSyllables(n.nom).join('-')}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\n// import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nimport NavigationBar from './NavigationBar';\r\nimport Login from './Login';\r\nimport User from './User';\r\nimport BetterLists from './BetterLists';\r\nimport SportsMenu from './SportsMenu';\r\nimport Squash from './Squash';\r\nimport Gym from './Gym';\r\nimport Cookbook from './Cookbook';\r\nimport Fifths from './Fifths';\r\nimport WordPop from './Games/WordPop/WordPop';\r\nimport Nouns from './tmp/Nouns';\r\nimport VocabBuilder from './Games/VocabBuilder/VocabBuilder';\r\nimport GameMenu from './Games/GameMenu';\r\nimport Syllable from './Games/Syllable/Syllable';\r\n\r\nexport default function LanisRouter() {\r\n    const auth = useAuth();\r\n\r\n    const topStyle = {\r\n\r\n    };\r\n    const bottomStyle = {\r\n        flexGrow: \"1\",\r\n    };\r\n    return (\r\n        <Router>\r\n            <div style={topStyle}>\r\n                <Route path=\"/\"><NavigationBar/></Route>\r\n            </div>\r\n            <div style={bottomStyle}>\r\n                <Switch>\r\n                    <Route path=\"/games\" exact><GameMenu/></Route>\r\n                    <Route path=\"/games/wordpop\"><WordPop/></Route>\r\n                    <Route path=\"/games/vocabbuilder\"><VocabBuilder/></Route>\r\n                    <Route path=\"/games/syllable\"><Syllable/></Route>\r\n                    {\r\n                        !auth && <Route path=\"/\"><Login /></Route>\r\n                    }\r\n\r\n                    <Route path=\"/user\" exact><User/></Route>\r\n\r\n                    <Route path=\"/lists\"><BetterLists/></Route>\r\n\r\n                    <Route path=\"/sports\" exact><SportsMenu/></Route>\r\n                    <Route path=\"/sports/squash\"><Squash/></Route>\r\n                    <Route path=\"/sports/gym\"><Gym/></Route>\r\n\r\n                    <Route path='/cookbook'><Cookbook/></Route>\r\n\r\n                    <Route path=\"/fifths\"><Fifths/></Route>\r\n                    <Route path=\"/tmp/nouns\"><Nouns/></Route>\r\n                </Switch>\r\n            </div>\r\n        </Router>\r\n    )\r\n}","import LanisRouter from './components/LanisRouter';\nimport { DevProvider } from './contexts/DevContext';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { ThemeProvider } from './contexts/ThemeContext';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport './App.css';\n\nconst queryClient = new QueryClient();\n\nfunction App() {\n\n  return (\n    <DevProvider>\n      <AuthProvider>\n        <ThemeProvider>\n          <QueryClientProvider client={queryClient}>\n            <DndProvider backend={HTML5Backend}>\n              <div className=\"AppBody\">\n                <LanisRouter/>\n              </div>\n            </DndProvider>\n          </QueryClientProvider>\n        </ThemeProvider>\n      </AuthProvider>\n    </DevProvider>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}